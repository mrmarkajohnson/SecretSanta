function initStatusSelect(){let n=document.querySelectorAll("select.relationship-status-select"),t=document.querySelector("div.relationships-table").getAttribute("data-url"),i=new URL(t);n.forEach(function(n){n.setAttribute("data-original-value",n.value);n.addEventListener("click",function(t){let r=n.getAttribute("data-original-value");if(n.value!=r){let r=n.getAttribute("data-name"),u="Change relationship status",f="Are you sure you want to change the status of your relationship with "+r+"?";n.value=="NotRelationship"&&(u="Deny suggesteed relationship",f="You're NOT in a relationship with "+r+", is that correct?");relationshipStatusChanged(t.currentTarget,i,u,f)}})})}async function relationshipStatusChanged(n,t,i,r){async function f(){let f=n.getAttribute("data-link-id"),e=n.getAttribute("data-user-id");t.searchParams.set("partnerLinkId",f);t.searchParams.set("userId",e);t.searchParams.set("newStatus",n.value);let i=await fetch(t.href,{method:"POST",redirect:"follow"});await i;document.dispatchEvent(new Event("ajaxComplete"));let r=await i.text();i.redirected?window.location.href=i.url:i.ok?n.setAttribute("data-original-value",n.value):n.value=u;i.redirected||r==null||r==""||(i.ok?toastr.success(r):toastr.error(r))}let u=n.getAttribute("data-original-value");bootbox.confirm({title:i,message:r,buttons:{confirm:{label:"Yes",className:"btn-success"},cancel:{label:"No",className:"btn-no"}},callback:function(t){bootbox.hideAll();t&&f();n.value=u}})}window.addEventListener("load",function(){initStatusSelect()});
//# sourceMappingURL=bundle.min.js.map